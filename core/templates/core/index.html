{% extends "core/base.html" %}

{% block main %}
<section class="container my-5 rounded-2">
    <div class="row">
        <div class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner rounded-2">
              <div class="carousel-item active">
                <img src="https://dummyimage.com/800x300/AAA/FFF" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://dummyimage.com/800x300/fff/aaa" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://loremflickr.com/800/300" class="d-block w-100" alt="...">
              </div>
            </div>
          </div>
    </div>
</section>

<div class="row">
    <div class="col-md-6 text-center">
        <img src="static/core/img/oceano.png" class="img-form">
        <h2>Título 1</h2>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus quibusdam consectetur recusandae praesentium nesciunt sunt optio impedit consequuntur earum laborum eius, quo nihil harum ullam labore tempora voluptas eligendi sequi officiis. Ducimus non, dolor perspiciatis quas ut eaque rerum, dolores numquam voluptate est eius vero nisi, possimus modi reiciendis porro.</p>
    </div>
    <div class="col-md-6 text-center">
        
        <img src="static/core/img/ruta.png" class="img-form">
        <h2>Título 2</h2>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Praesentium dolores amet odit nemo iste blanditiis libero quasi, quas quam obcaecati nulla, quo omnis labore fugiat architecto facere impedit, vel inventore dicta corporis. Vitae harum nihil ad saepe accusamus, blanditiis voluptate placeat dolorum eveniet quam eum magnam, incidunt laboriosam et at.</p>
    </div>
</div>

<div class="container mt-5">
  <h2>Productos Disponibles</h2>
  <div class="row">
    {% for producto in productos %}
      <div class="col-md-4">
        <div class="card mb-4">
          <img src="{{ producto.imagen.url }}" class="card-img-top" alt="{{ producto.nombre }}">
          <div class="card-body">
            <h5 class="card-title">{{ producto.nombre }}</h5>
            <p class="card-text">{{ producto.descripcion }}</p>
            <p><strong>Precio: ${{ producto.precio }}</strong></p>
            <button class="btn btn-primary agregar-carrito" data-id="{{ producto.id }}">Agregar al Carrito</button>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  <a href="{% url 'ver_carrito' %}" class="btn btn-success">Ver Carrito</a>
</div>
<script>
  $(document).on('click', '.agregar-carrito', function () {
    const productoId = $(this).data('id');
    $.post("{% url 'agregar_al_carrito' %}", {
      'producto_id': productoId,
      'csrfmiddlewaretoken': '{{ csrf_token }}'
    }, function (data) {
      if (data.success) {
        alert("Producto agregado al carrito");
      }
    });
  });
</script>
{% endblock main %}
